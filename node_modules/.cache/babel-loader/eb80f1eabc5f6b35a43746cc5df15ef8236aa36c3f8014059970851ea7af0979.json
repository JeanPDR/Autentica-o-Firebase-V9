{"ast":null,"code":"import _objectSpread from\"/workspace/Autentica-o-Firebase-V9/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/workspace/Autentica-o-Firebase-V9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/Autentica-o-Firebase-V9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspace/Autentica-o-Firebase-V9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./task.css';import{useState}from'react';import TaskItem from'./TaskItem';import EditTask from'./EditTask';import{doc,updateDoc,deleteDoc}from\"firebase/firestore\";import{db}from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Task(_ref){var id=_ref.id,title=_ref.title,description=_ref.description,completed=_ref.completed;var _useState=useState(completed),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState({edit:false,view:false}),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var handleClose=function handleClose(){setOpen({edit:false,view:false});};/* function to update firestore */var handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var taskDocRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:taskDocRef=doc(db,'tasks',id);_context.prev=1;_context.next=4;return updateDoc(taskDocRef,{completed:checked});case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);alert(_context.t0);case 9:case\"end\":return _context.stop();}},_callee,null,[[1,6]]);}));return function handleChange(){return _ref2.apply(this,arguments);};}();/* function to delete a document from firstore */var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var taskDocRef;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:taskDocRef=doc(db,'tasks',id);_context2.prev=1;_context2.next=4;return deleteDoc(taskDocRef);case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](1);alert(_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[1,6]]);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"task \".concat(checked&&'task--borderColor'),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{id:\"checkbox-\".concat(id),className:\"checkbox-custom\",name:\"checkbox\",checked:checked,onChange:handleChange,type:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"checkbox-\".concat(id),className:\"checkbox-custom-label\",onClick:function onClick(){return setChecked(!checked);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task__body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"task__buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task__deleteNedit\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"task__editButton\",onClick:function onClick(){return setOpen(_objectSpread(_objectSpread({},open),{},{edit:true}));},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"task__deleteButton\",onClick:handleDelete,children:\"Delete\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(_objectSpread(_objectSpread({},open),{},{view:true}));},children:\"View\"})]})]}),open.view&&/*#__PURE__*/_jsx(TaskItem,{onClose:handleClose,title:title,description:description,open:open.view}),open.edit&&/*#__PURE__*/_jsx(EditTask,{onClose:handleClose,toEditTitle:title,toEditDescription:description,open:open.edit,id:id})]});}export default Task;","map":{"version":3,"names":["useState","TaskItem","EditTask","doc","updateDoc","deleteDoc","db","Task","id","title","description","completed","checked","setChecked","edit","view","open","setOpen","handleClose","handleChange","taskDocRef","alert","handleDelete"],"sources":["/workspace/Autentica-o-Firebase-V9/src/pages/Passenger/Task.js"],"sourcesContent":["import './task.css'\nimport {useState} from 'react'\nimport TaskItem from './TaskItem'\nimport EditTask from './EditTask'\nimport { doc, updateDoc, deleteDoc} from \"firebase/firestore\";\nimport {db} from '../../firebase'\n\nfunction Task({id, title, description, completed}) {\n\n  const [checked, setChecked] = useState(completed)\n  const [open, setOpen] = useState({edit:false, view:false})\n\n  const handleClose = () => {\n    setOpen({edit:false, view:false})\n  }\n\n  /* function to update firestore */\n  const handleChange = async () => {\n    const taskDocRef = doc(db, 'tasks', id)\n    try{\n      await updateDoc(taskDocRef, {\n        completed: checked\n      })\n    } catch (err) {\n      alert(err)\n    }\n  }\n\n  /* function to delete a document from firstore */ \n  const handleDelete = async () => {\n    const taskDocRef = doc(db, 'tasks', id)\n    try{\n      await deleteDoc(taskDocRef)\n    } catch (err) {\n      alert(err)\n    }\n  }\n\n  return (\n    <div className={`task ${checked && 'task--borderColor'}`}>\n      <div>\n        <input \n          id={`checkbox-${id}`} \n          className='checkbox-custom'\n          name=\"checkbox\" \n          checked={checked}\n          onChange={handleChange}\n          type=\"checkbox\" />\n        <label \n          htmlFor={`checkbox-${id}`} \n          className=\"checkbox-custom-label\" \n          onClick={() => setChecked(!checked)} ></label>\n      </div>\n      <div className='task__body'>\n        <h2>{title}</h2>\n        <p>{description}</p>\n        <div className='task__buttons'>\n          <div className='task__deleteNedit'>\n            <button \n              className='task__editButton' \n              onClick={() => setOpen({...open, edit : true})}>\n              Edit\n            </button>\n            <button className='task__deleteButton' onClick={handleDelete}>Delete</button>\n          </div>\n          <button \n            onClick={() => setOpen({...open, view: true})}>\n            View\n          </button>\n        </div>\n      </div>\n\n      {open.view &&\n        <TaskItem \n          onClose={handleClose} \n          title={title} \n          description={description} \n          open={open.view} />\n      }\n\n      {open.edit &&\n        <EditTask \n          onClose={handleClose} \n          toEditTitle={title} \n          toEditDescription={description} \n          open={open.edit}\n          id={id} />\n      }\n\n    </div>\n  )\n}\n\nexport default Task"],"mappings":"+eAAA,MAAO,YAAY,CACnB,OAAQA,QAAQ,KAAO,OAAO,CAC9B,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,SAAQ,KAAM,YAAY,CACjC,OAASC,GAAG,CAAEC,SAAS,CAAEC,SAAS,KAAO,oBAAoB,CAC7D,OAAQC,EAAE,KAAO,gBAAgB,yFAEjC,QAASC,KAAI,MAAsC,IAApCC,GAAE,MAAFA,EAAE,CAAEC,KAAK,MAALA,KAAK,CAAEC,WAAW,MAAXA,WAAW,CAAEC,SAAS,MAATA,SAAS,CAE9C,cAA8BX,QAAQ,CAACW,SAAS,CAAC,wCAA1CC,OAAO,eAAEC,UAAU,eAC1B,eAAwBb,QAAQ,CAAC,CAACc,IAAI,CAAC,KAAK,CAAEC,IAAI,CAAC,KAAK,CAAC,CAAC,yCAAnDC,IAAI,eAAEC,OAAO,eAEpB,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxBD,OAAO,CAAC,CAACH,IAAI,CAAC,KAAK,CAAEC,IAAI,CAAC,KAAK,CAAC,CAAC,CACnC,CAAC,CAED,kCACA,GAAMI,aAAY,6FAAG,mJACbC,UAAU,CAAGjB,GAAG,CAACG,EAAE,CAAE,OAAO,CAAEE,EAAE,CAAC,uCAE/BJ,UAAS,CAACgB,UAAU,CAAE,CAC1BT,SAAS,CAAEC,OACb,CAAC,CAAC,sFAEFS,KAAK,aAAK,mEAEb,kBATKF,aAAY,2CASjB,CAED,iDACA,GAAMG,aAAY,6FAAG,wJACbF,UAAU,CAAGjB,GAAG,CAACG,EAAE,CAAE,OAAO,CAAEE,EAAE,CAAC,yCAE/BH,UAAS,CAACe,UAAU,CAAC,0FAE3BC,KAAK,cAAK,qEAEb,kBAPKC,aAAY,2CAOjB,CAED,mBACE,aAAK,SAAS,gBAAUV,OAAO,EAAI,mBAAmB,CAAG,wBACvD,oCACE,cACE,EAAE,oBAAcJ,EAAE,CAAG,CACrB,SAAS,CAAC,iBAAiB,CAC3B,IAAI,CAAC,UAAU,CACf,OAAO,CAAEI,OAAQ,CACjB,QAAQ,CAAEO,YAAa,CACvB,IAAI,CAAC,UAAU,EAAG,cACpB,cACE,OAAO,oBAAcX,EAAE,CAAG,CAC1B,SAAS,CAAC,uBAAuB,CACjC,OAAO,CAAE,yBAAMK,WAAU,CAAC,CAACD,OAAO,CAAC,EAAC,EAAU,GAC5C,cACN,aAAK,SAAS,CAAC,YAAY,wBACzB,oBAAKH,KAAK,EAAM,cAChB,mBAAIC,WAAW,EAAK,cACpB,aAAK,SAAS,CAAC,eAAe,wBAC5B,aAAK,SAAS,CAAC,mBAAmB,wBAChC,eACE,SAAS,CAAC,kBAAkB,CAC5B,OAAO,CAAE,yBAAMO,QAAO,gCAAKD,IAAI,MAAEF,IAAI,CAAG,IAAI,GAAE,EAAC,UAAC,MAElD,EAAS,cACT,eAAQ,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAEQ,YAAa,UAAC,QAAM,EAAS,GACzE,cACN,eACE,OAAO,CAAE,yBAAML,QAAO,gCAAKD,IAAI,MAAED,IAAI,CAAE,IAAI,GAAE,EAAC,UAAC,MAEjD,EAAS,GACL,GACF,CAELC,IAAI,CAACD,IAAI,eACR,KAAC,QAAQ,EACP,OAAO,CAAEG,WAAY,CACrB,KAAK,CAAET,KAAM,CACb,WAAW,CAAEC,WAAY,CACzB,IAAI,CAAEM,IAAI,CAACD,IAAK,EAAG,CAGtBC,IAAI,CAACF,IAAI,eACR,KAAC,QAAQ,EACP,OAAO,CAAEI,WAAY,CACrB,WAAW,CAAET,KAAM,CACnB,iBAAiB,CAAEC,WAAY,CAC/B,IAAI,CAAEM,IAAI,CAACF,IAAK,CAChB,EAAE,CAAEN,EAAG,EAAG,GAGV,CAEV,CAEA,cAAeD,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}